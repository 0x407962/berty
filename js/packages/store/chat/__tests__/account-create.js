/*jest style test */

import * as chat from '..'
const { reducer } = chat.init()

var equality = function equality(result, nextState) {
	return JSON.stringify(result) === JSON.stringify(nextState)
}
var actions = [
	{
		action: {
			type: 'chat/account/command/create',
			payload: {
				name: 'Anonymous 1337',
			},
		},
		prevState: {
			protocol: {
				client: {
					aggregates: {},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
		nextState: {
			protocol: {
				client: {
					aggregates: {},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
	},
	{
		action: {
			type: 'protocol/client/event/started',
			payload: {
				aggregateId: '5321772602783843240',
				accountPk: {
					type: 'Buffer',
					data: [
						97,
						55,
						97,
						100,
						49,
						49,
						51,
						52,
						57,
						99,
						98,
						49,
						97,
						52,
						54,
						97,
						102,
						55,
						48,
						50,
						56,
						51,
						52,
						48,
						57,
						49,
						51,
						55,
						56,
						55,
						51,
						53,
						49,
						56,
						54,
						101,
						101,
						56,
						51,
						53,
						101,
						51,
						48,
						51,
						51,
						51,
						54,
						97,
						50,
						55,
						52,
						51,
						54,
						102,
						48,
						56,
						97,
						51,
						98,
						101,
						101,
						51,
						48,
						102,
						56,
						97,
						50,
						55,
						102,
						101,
						99,
						48,
						98,
						49,
						54,
						51,
						53,
						49,
						55,
						48,
						98,
						57,
						56,
						48,
						52,
						49,
						49,
						98,
						49,
						53,
						99,
						56,
						54,
						51,
						53,
						52,
						97,
						100,
						102,
						57,
						51,
						54,
						56,
						100,
						101,
						57,
						101,
						50,
						100,
						102,
						56,
						102,
						55,
						100,
						50,
						57,
						52,
						97,
						56,
						57,
						51,
						51,
						49,
						54,
						102,
						102,
						100,
						57,
						58,
						51,
						51,
						100,
						98,
						53,
						98,
						57,
						51,
						97,
						54,
						52,
						55,
						101,
						52,
						49,
						49,
						53,
						52,
						48,
						98,
						99,
						52,
						51,
						97,
						51,
						53,
						54,
						54,
						52,
						98,
						51,
						48,
						48,
						55,
						100,
						97,
						48,
						52,
						57,
						51,
						97,
						49,
						54,
						55,
						98,
						97,
						100,
						52,
						53,
						101,
						51,
						97,
						100,
						50,
						54,
						52,
						100,
						57,
						101,
						51,
						57,
						48,
						56,
						48,
						52,
						48,
						48,
						97,
						51,
						97,
						56,
						102,
						52,
						55,
						49,
						55,
						101,
						98,
						50,
						51,
						97,
						101,
						52,
						57,
						97,
						54,
						99,
						54,
						99,
						50,
						100,
						55,
						53,
						49,
						97,
						55,
						57,
						48,
						49,
						97,
						102,
						57,
						48,
						49,
						54,
						57,
						57,
						56,
						102,
						53,
						100,
						51,
						55,
						48,
						53,
						52,
						50,
						102,
						100,
						100,
						51,
						53,
						55,
						49,
						101,
						54,
						56,
						51,
					],
				},
				devicePk: {
					type: 'Buffer',
					data: [
						97,
						57,
						53,
						52,
						99,
						57,
						55,
						51,
						50,
						51,
						49,
						56,
						98,
						57,
						99,
						101,
						51,
						54,
						48,
						100,
						56,
						57,
						49,
						54,
						49,
						56,
						53,
						101,
						49,
						50,
						49,
						54,
						50,
						55,
						49,
						57,
						53,
						98,
						49,
						56,
						56,
						51,
						51,
						50,
						101,
						54,
						97,
						56,
						102,
						100,
						57,
						52,
						50,
						51,
						54,
						54,
						56,
						48,
						99,
						55,
						50,
						57,
						52,
						57,
						99,
						98,
						52,
						55,
						50,
						54,
						98,
						54,
						100,
						100,
						51,
						100,
						49,
						56,
						49,
						100,
						101,
						102,
						100,
						100,
						101,
						102,
						100,
						102,
						97,
						54,
						54,
						55,
						102,
						55,
						54,
						54,
						56,
						52,
						50,
						51,
						100,
						55,
						98,
						50,
						99,
						49,
						50,
						99,
						49,
						99,
						100,
						52,
						102,
						101,
						99,
						55,
						53,
						101,
						57,
						97,
						51,
						56,
						57,
						101,
						56,
						56,
						52,
						53,
						58,
						48,
						102,
						54,
						100,
						51,
						50,
						53,
						50,
						55,
						52,
						98,
						56,
						52,
						56,
						49,
						55,
						101,
						98,
						97,
						100,
						49,
						51,
						52,
						54,
						54,
						56,
						56,
						57,
						52,
						97,
						56,
						52,
						50,
						54,
						50,
						56,
						102,
						100,
						50,
						99,
						52,
						54,
						55,
						54,
						57,
						98,
						98,
						48,
						99,
						52,
						101,
						49,
						97,
						49,
						54,
						56,
						48,
						101,
						99,
						53,
						55,
						53,
						48,
						101,
						51,
						57,
						98,
						55,
						54,
						54,
						51,
						52,
						98,
						50,
						52,
						100,
						99,
						49,
						54,
						50,
						52,
						56,
						48,
						54,
						102,
						57,
						102,
						97,
						55,
						52,
						48,
						56,
						102,
						48,
						101,
						100,
						50,
						52,
						57,
						54,
						53,
						53,
						101,
						56,
						100,
						48,
						99,
						102,
						55,
						54,
						53,
						53,
						101,
						50,
						99,
						99,
						54,
						97,
						101,
						100,
						53,
						49,
						99,
						53,
						51,
						98,
						55,
						102,
					],
				},
				accountGroupPk: {
					type: 'Buffer',
					data: [
						55,
						57,
						97,
						98,
						54,
						49,
						97,
						52,
						98,
						49,
						101,
						53,
						57,
						98,
						52,
						98,
						53,
						56,
						98,
						100,
						53,
						100,
						100,
						49,
						57,
						51,
						53,
						56,
						51,
						56,
						56,
						54,
						98,
						48,
						52,
						52,
						55,
						55,
						53,
						53,
						97,
						98,
						54,
						56,
						98,
						97,
						53,
						102,
						98,
						55,
						100,
						98,
						98,
						100,
						53,
						48,
						101,
						53,
						98,
						102,
						55,
						101,
						49,
						97,
						100,
						54,
						48,
						101,
						51,
						53,
						99,
						54,
						98,
						98,
						100,
						48,
						102,
						50,
						56,
						99,
						98,
						56,
						98,
						51,
						102,
						50,
						97,
						52,
						50,
						49,
						57,
						97,
						57,
						101,
						57,
						49,
						57,
						99,
						55,
						56,
						52,
						56,
						102,
						48,
						50,
						52,
						50,
						53,
						101,
						52,
						55,
						50,
						54,
						57,
						98,
						48,
						48,
						56,
						56,
						56,
						54,
						54,
						56,
						99,
						49,
						55,
						54,
						102,
						58,
						49,
						102,
						48,
						50,
						51,
						102,
						49,
						48,
						56,
						54,
						48,
						97,
						48,
						51,
						53,
						102,
						50,
						99,
						57,
						101,
						55,
						57,
						50,
						54,
						52,
						101,
						100,
						99,
						55,
						97,
						55,
						56,
						50,
						52,
						54,
						53,
						57,
						99,
						54,
						53,
						101,
						99,
						57,
						55,
						53,
						50,
						52,
						52,
						97,
						52,
						98,
						52,
						52,
						50,
						98,
						54,
						48,
						97,
						98,
						53,
						55,
						55,
						54,
						48,
						102,
						51,
						101,
						100,
						56,
						51,
						52,
						53,
						50,
						99,
						98,
						102,
						101,
						97,
						54,
						50,
						53,
						53,
						100,
						50,
						48,
						55,
						56,
						100,
						101,
						48,
						57,
						51,
						99,
						55,
						53,
						102,
						52,
						100,
						54,
						98,
						99,
						101,
						100,
						97,
						52,
						54,
						50,
						102,
						97,
						102,
						56,
						97,
						50,
						52,
						53,
						102,
						53,
						97,
						48,
						57,
						52,
						56,
						97,
						49,
						98,
						99,
						101,
						99,
					],
				},
			},
		},
		prevState: {
			protocol: {
				client: {
					aggregates: {},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
		nextState: {
			protocol: {
				client: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							accountPk:
								'a7ad11349cb1a46af702834091378735186ee835e303336a27436f08a3bee30f8a27fec0b1635170b980411b15c86354adf9368de9e2df8f7d294a893316ffd9:33db5b93a647e411540bc43a35664b3007da0493a167bad45e3ad264d9e39080400a3a8f4717eb23ae49a6c6c2d751a7901af9016998f5d370542fdd3571e683',
							devicePk:
								'a954c9732318b9ce360d8916185e121627195b188332e6a8fd94236680c72949cb4726b6dd3d181defddefdfa667f7668423d7b2c12c1cd4fec75e9a389e8845:0f6d325274b84817ebad134668894a842628fd2c46769bb0c4e1a1680ec5750e39b76634b24dc1624806f9fa7408f0ed249655e8d0cf7655e2cc6aed51c53b7f',
							accountGroupPk:
								'79ab61a4b1e59b4b58bd5dd193583886b0447755ab68ba5fb7dbbd50e5bf7e1ad60e35c6bbd0f28cb8b3f2a4219a9e919c7848f02425e47269b00888668c176f:1f023f10860a035f2c9e79264edc7a7824659c65ec975244a4b442b60ab57760f3ed83452cbfea6255d2078de093c75f4d6bceda462faf8a245f5a0948a1bcec',
						},
					},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
	},
	{
		action: {
			type: 'protocol/client/event/contactRequestReferenceUpdated',
			payload: {
				aggregateId: '5321772602783843240',
				reference: {
					'0': 97,
					'1': 55,
					'2': 97,
					'3': 100,
					'4': 49,
					'5': 49,
					'6': 51,
					'7': 52,
					'8': 57,
					'9': 99,
					'10': 98,
					'11': 49,
					'12': 97,
					'13': 52,
					'14': 54,
					'15': 97,
					'16': 102,
					'17': 55,
					'18': 48,
					'19': 50,
					'20': 56,
					'21': 51,
					'22': 52,
					'23': 48,
					'24': 57,
					'25': 49,
					'26': 51,
					'27': 55,
					'28': 56,
					'29': 55,
					'30': 51,
					'31': 53,
					'32': 49,
					'33': 56,
					'34': 54,
					'35': 101,
					'36': 101,
					'37': 56,
					'38': 51,
					'39': 53,
					'40': 101,
					'41': 51,
					'42': 48,
					'43': 51,
					'44': 51,
					'45': 51,
					'46': 54,
					'47': 97,
					'48': 50,
					'49': 55,
					'50': 52,
					'51': 51,
					'52': 54,
					'53': 102,
					'54': 48,
					'55': 56,
					'56': 97,
					'57': 51,
					'58': 98,
					'59': 101,
					'60': 101,
					'61': 51,
					'62': 48,
					'63': 102,
					'64': 56,
					'65': 97,
					'66': 50,
					'67': 55,
					'68': 102,
					'69': 101,
					'70': 99,
					'71': 48,
					'72': 98,
					'73': 49,
					'74': 54,
					'75': 51,
					'76': 53,
					'77': 49,
					'78': 55,
					'79': 48,
					'80': 98,
					'81': 57,
					'82': 56,
					'83': 48,
					'84': 52,
					'85': 49,
					'86': 49,
					'87': 98,
					'88': 49,
					'89': 53,
					'90': 99,
					'91': 56,
					'92': 54,
					'93': 51,
					'94': 53,
					'95': 52,
					'96': 97,
					'97': 100,
					'98': 102,
					'99': 57,
					'100': 51,
					'101': 54,
					'102': 56,
					'103': 100,
					'104': 101,
					'105': 57,
					'106': 101,
					'107': 50,
					'108': 100,
					'109': 102,
					'110': 56,
					'111': 102,
					'112': 55,
					'113': 100,
					'114': 50,
					'115': 57,
					'116': 52,
					'117': 97,
					'118': 56,
					'119': 57,
					'120': 51,
					'121': 51,
					'122': 49,
					'123': 54,
					'124': 102,
					'125': 102,
					'126': 100,
					'127': 57,
					'128': 58,
					'129': 51,
					'130': 51,
					'131': 100,
					'132': 98,
					'133': 53,
					'134': 98,
					'135': 57,
					'136': 51,
					'137': 97,
					'138': 54,
					'139': 52,
					'140': 55,
					'141': 101,
					'142': 52,
					'143': 49,
					'144': 49,
					'145': 53,
					'146': 52,
					'147': 48,
					'148': 98,
					'149': 99,
					'150': 52,
					'151': 51,
					'152': 97,
					'153': 51,
					'154': 53,
					'155': 54,
					'156': 54,
					'157': 52,
					'158': 98,
					'159': 51,
					'160': 48,
					'161': 48,
					'162': 55,
					'163': 100,
					'164': 97,
					'165': 48,
					'166': 52,
					'167': 57,
					'168': 51,
					'169': 97,
					'170': 49,
					'171': 54,
					'172': 55,
					'173': 98,
					'174': 97,
					'175': 100,
					'176': 52,
					'177': 53,
					'178': 101,
					'179': 51,
					'180': 97,
					'181': 100,
					'182': 50,
					'183': 54,
					'184': 52,
					'185': 100,
					'186': 57,
					'187': 101,
					'188': 51,
					'189': 57,
					'190': 48,
					'191': 56,
					'192': 48,
					'193': 52,
					'194': 48,
					'195': 48,
					'196': 97,
					'197': 51,
					'198': 97,
					'199': 56,
					'200': 102,
					'201': 52,
					'202': 55,
					'203': 49,
					'204': 55,
					'205': 101,
					'206': 98,
					'207': 50,
					'208': 51,
					'209': 97,
					'210': 101,
					'211': 52,
					'212': 57,
					'213': 97,
					'214': 54,
					'215': 99,
					'216': 54,
					'217': 99,
					'218': 50,
					'219': 100,
					'220': 55,
					'221': 53,
					'222': 49,
					'223': 97,
					'224': 55,
					'225': 57,
					'226': 48,
					'227': 49,
					'228': 97,
					'229': 102,
					'230': 57,
					'231': 48,
					'232': 49,
					'233': 54,
					'234': 57,
					'235': 57,
					'236': 56,
					'237': 102,
					'238': 53,
					'239': 100,
					'240': 51,
					'241': 55,
					'242': 48,
					'243': 53,
					'244': 52,
					'245': 50,
					'246': 102,
					'247': 100,
					'248': 100,
					'249': 51,
					'250': 53,
					'251': 55,
					'252': 49,
					'253': 101,
					'254': 54,
					'255': 56,
					'256': 51,
					'257': 95,
					'258': 95,
					'259': 53,
					'260': 101,
					'261': 52,
					'262': 100,
					'263': 51,
					'264': 52,
					'265': 57,
					'266': 57,
					'267': 98,
					'268': 101,
					'269': 48,
					'270': 98,
					'271': 55,
					'272': 101,
					'273': 98,
					'274': 49,
					'275': 97,
					'276': 52,
					'277': 99,
					'278': 49,
					'279': 100,
					'280': 53,
					'281': 57,
					'282': 97,
					'283': 56,
					'284': 48,
					'285': 55,
					'286': 55,
					'287': 55,
					'288': 49,
					'289': 57,
					'290': 56,
					'291': 101,
					'292': 100,
					'293': 97,
					'294': 100,
					'295': 48,
					'296': 99,
					'297': 49,
					'298': 99,
					'299': 97,
					'300': 102,
					'301': 56,
					'302': 50,
					'303': 102,
					'304': 98,
					'305': 97,
					'306': 49,
					'307': 102,
					'308': 51,
					'309': 57,
					'310': 49,
					'311': 99,
					'312': 97,
					'313': 48,
					'314': 50,
					'315': 53,
					'316': 54,
					'317': 51,
					'318': 51,
					'319': 98,
					'320': 50,
					'321': 100,
					'322': 51,
					'323': 98,
					'324': 100,
					'325': 98,
					'326': 99,
					'327': 49,
					'328': 101,
					'329': 98,
					'330': 53,
					'331': 48,
					'332': 55,
					'333': 57,
					'334': 51,
					'335': 101,
					'336': 52,
					'337': 97,
					'338': 49,
					'339': 50,
					'340': 52,
					'341': 51,
					'342': 56,
					'343': 97,
					'344': 53,
					'345': 56,
					'346': 100,
					'347': 102,
					'348': 54,
					'349': 52,
					'350': 57,
					'351': 97,
					'352': 57,
					'353': 49,
					'354': 101,
					'355': 52,
					'356': 50,
					'357': 50,
					'358': 53,
					'359': 56,
					'360': 100,
					'361': 50,
					'362': 97,
					'363': 97,
					'364': 100,
					'365': 57,
					'366': 56,
					'367': 51,
					'368': 101,
					'369': 48,
					'370': 54,
					'371': 48,
					'372': 99,
					'373': 101,
					'374': 100,
					'375': 97,
					'376': 99,
					'377': 55,
					'378': 50,
					'379': 98,
					'380': 50,
					'381': 98,
					'382': 51,
					'383': 48,
					'384': 49,
					'385': 102,
					'386': 56,
				},
			},
		},
		prevState: {
			protocol: {
				client: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							accountPk:
								'a7ad11349cb1a46af702834091378735186ee835e303336a27436f08a3bee30f8a27fec0b1635170b980411b15c86354adf9368de9e2df8f7d294a893316ffd9:33db5b93a647e411540bc43a35664b3007da0493a167bad45e3ad264d9e39080400a3a8f4717eb23ae49a6c6c2d751a7901af9016998f5d370542fdd3571e683',
							devicePk:
								'a954c9732318b9ce360d8916185e121627195b188332e6a8fd94236680c72949cb4726b6dd3d181defddefdfa667f7668423d7b2c12c1cd4fec75e9a389e8845:0f6d325274b84817ebad134668894a842628fd2c46769bb0c4e1a1680ec5750e39b76634b24dc1624806f9fa7408f0ed249655e8d0cf7655e2cc6aed51c53b7f',
							accountGroupPk:
								'79ab61a4b1e59b4b58bd5dd193583886b0447755ab68ba5fb7dbbd50e5bf7e1ad60e35c6bbd0f28cb8b3f2a4219a9e919c7848f02425e47269b00888668c176f:1f023f10860a035f2c9e79264edc7a7824659c65ec975244a4b442b60ab57760f3ed83452cbfea6255d2078de093c75f4d6bceda462faf8a245f5a0948a1bcec',
						},
					},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
		nextState: {
			protocol: {
				client: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							accountPk:
								'a7ad11349cb1a46af702834091378735186ee835e303336a27436f08a3bee30f8a27fec0b1635170b980411b15c86354adf9368de9e2df8f7d294a893316ffd9:33db5b93a647e411540bc43a35664b3007da0493a167bad45e3ad264d9e39080400a3a8f4717eb23ae49a6c6c2d751a7901af9016998f5d370542fdd3571e683',
							devicePk:
								'a954c9732318b9ce360d8916185e121627195b188332e6a8fd94236680c72949cb4726b6dd3d181defddefdfa667f7668423d7b2c12c1cd4fec75e9a389e8845:0f6d325274b84817ebad134668894a842628fd2c46769bb0c4e1a1680ec5750e39b76634b24dc1624806f9fa7408f0ed249655e8d0cf7655e2cc6aed51c53b7f',
							accountGroupPk:
								'79ab61a4b1e59b4b58bd5dd193583886b0447755ab68ba5fb7dbbd50e5bf7e1ad60e35c6bbd0f28cb8b3f2a4219a9e919c7848f02425e47269b00888668c176f:1f023f10860a035f2c9e79264edc7a7824659c65ec975244a4b442b60ab57760f3ed83452cbfea6255d2078de093c75f4d6bceda462faf8a245f5a0948a1bcec',
						},
					},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
	},
	{
		action: {
			type: 'protocol/client/event/groupMetadataPayloadSent',
			payload: {
				aggregateId: '5321772602783843240',
				eventContext: {
					id: 'YmFmeXJlaWQzdmc0bHNiYWlwNzZ1YXFmaHh4ZHhhcG01d3JnZXF0aG12dHlwejV0YW9qZXZ1M2I2aG0=',
				},
				metadata: {
					eventType: 'EventTypeGroupMetadataPayloadSent',
				},
				event: {
					type: 'chat/account/event/created',
					payload: {
						aggregateId: '5321772602783843240',
						name: 'Anonymous 1337',
					},
				},
			},
		},
		prevState: {
			protocol: {
				client: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							accountPk:
								'a7ad11349cb1a46af702834091378735186ee835e303336a27436f08a3bee30f8a27fec0b1635170b980411b15c86354adf9368de9e2df8f7d294a893316ffd9:33db5b93a647e411540bc43a35664b3007da0493a167bad45e3ad264d9e39080400a3a8f4717eb23ae49a6c6c2d751a7901af9016998f5d370542fdd3571e683',
							devicePk:
								'a954c9732318b9ce360d8916185e121627195b188332e6a8fd94236680c72949cb4726b6dd3d181defddefdfa667f7668423d7b2c12c1cd4fec75e9a389e8845:0f6d325274b84817ebad134668894a842628fd2c46769bb0c4e1a1680ec5750e39b76634b24dc1624806f9fa7408f0ed249655e8d0cf7655e2cc6aed51c53b7f',
							accountGroupPk:
								'79ab61a4b1e59b4b58bd5dd193583886b0447755ab68ba5fb7dbbd50e5bf7e1ad60e35c6bbd0f28cb8b3f2a4219a9e919c7848f02425e47269b00888668c176f:1f023f10860a035f2c9e79264edc7a7824659c65ec975244a4b442b60ab57760f3ed83452cbfea6255d2078de093c75f4d6bceda462faf8a245f5a0948a1bcec',
						},
					},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
		nextState: {
			protocol: {
				client: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							accountPk:
								'a7ad11349cb1a46af702834091378735186ee835e303336a27436f08a3bee30f8a27fec0b1635170b980411b15c86354adf9368de9e2df8f7d294a893316ffd9:33db5b93a647e411540bc43a35664b3007da0493a167bad45e3ad264d9e39080400a3a8f4717eb23ae49a6c6c2d751a7901af9016998f5d370542fdd3571e683',
							devicePk:
								'a954c9732318b9ce360d8916185e121627195b188332e6a8fd94236680c72949cb4726b6dd3d181defddefdfa667f7668423d7b2c12c1cd4fec75e9a389e8845:0f6d325274b84817ebad134668894a842628fd2c46769bb0c4e1a1680ec5750e39b76634b24dc1624806f9fa7408f0ed249655e8d0cf7655e2cc6aed51c53b7f',
							accountGroupPk:
								'79ab61a4b1e59b4b58bd5dd193583886b0447755ab68ba5fb7dbbd50e5bf7e1ad60e35c6bbd0f28cb8b3f2a4219a9e919c7848f02425e47269b00888668c176f:1f023f10860a035f2c9e79264edc7a7824659c65ec975244a4b442b60ab57760f3ed83452cbfea6255d2078de093c75f4d6bceda462faf8a245f5a0948a1bcec',
						},
					},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
	},
	{
		action: {
			type: 'chat/account/event/created',
			payload: {
				aggregateId: '5321772602783843240',
				name: 'Anonymous 1337',
			},
		},
		prevState: {
			protocol: {
				client: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							accountPk:
								'a7ad11349cb1a46af702834091378735186ee835e303336a27436f08a3bee30f8a27fec0b1635170b980411b15c86354adf9368de9e2df8f7d294a893316ffd9:33db5b93a647e411540bc43a35664b3007da0493a167bad45e3ad264d9e39080400a3a8f4717eb23ae49a6c6c2d751a7901af9016998f5d370542fdd3571e683',
							devicePk:
								'a954c9732318b9ce360d8916185e121627195b188332e6a8fd94236680c72949cb4726b6dd3d181defddefdfa667f7668423d7b2c12c1cd4fec75e9a389e8845:0f6d325274b84817ebad134668894a842628fd2c46769bb0c4e1a1680ec5750e39b76634b24dc1624806f9fa7408f0ed249655e8d0cf7655e2cc6aed51c53b7f',
							accountGroupPk:
								'79ab61a4b1e59b4b58bd5dd193583886b0447755ab68ba5fb7dbbd50e5bf7e1ad60e35c6bbd0f28cb8b3f2a4219a9e919c7848f02425e47269b00888668c176f:1f023f10860a035f2c9e79264edc7a7824659c65ec975244a4b442b60ab57760f3ed83452cbfea6255d2078de093c75f4d6bceda462faf8a245f5a0948a1bcec',
						},
					},
				},
			},
			chat: {
				account: {
					aggregates: {},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
		nextState: {
			protocol: {
				client: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							accountPk:
								'a7ad11349cb1a46af702834091378735186ee835e303336a27436f08a3bee30f8a27fec0b1635170b980411b15c86354adf9368de9e2df8f7d294a893316ffd9:33db5b93a647e411540bc43a35664b3007da0493a167bad45e3ad264d9e39080400a3a8f4717eb23ae49a6c6c2d751a7901af9016998f5d370542fdd3571e683',
							devicePk:
								'a954c9732318b9ce360d8916185e121627195b188332e6a8fd94236680c72949cb4726b6dd3d181defddefdfa667f7668423d7b2c12c1cd4fec75e9a389e8845:0f6d325274b84817ebad134668894a842628fd2c46769bb0c4e1a1680ec5750e39b76634b24dc1624806f9fa7408f0ed249655e8d0cf7655e2cc6aed51c53b7f',
							accountGroupPk:
								'79ab61a4b1e59b4b58bd5dd193583886b0447755ab68ba5fb7dbbd50e5bf7e1ad60e35c6bbd0f28cb8b3f2a4219a9e919c7848f02425e47269b00888668c176f:1f023f10860a035f2c9e79264edc7a7824659c65ec975244a4b442b60ab57760f3ed83452cbfea6255d2078de093c75f4d6bceda462faf8a245f5a0948a1bcec',
						},
					},
				},
			},
			chat: {
				account: {
					aggregates: {
						'5321772602783843240': {
							id: '5321772602783843240',
							name: 'Anonymous 1337',
							requests: [],
							conversations: [],
							contacts: [],
						},
					},
				},
				incomingContactRequest: {
					events: [],
					aggregates: {},
				},
				outgoingContactRequest: {
					events: [],
					aggregates: {},
				},
				contact: {
					events: [],
					aggregates: {},
				},
				conversation: {
					events: [],
					aggregates: {},
				},
				member: {
					events: [],
					aggregates: {},
				},
				message: {
					events: [],
					aggregates: {},
				},
			},
		},
	},
]

test('chat/account/command/create (action index 0) should correctly update state', function() {
	var action = actions[0]
	var result = reducer(action.prevState, action.action)
	expect(equality(result, action.nextState)).toBe(true)
})

test('protocol/client/event/started (action index 1) should correctly update state', function() {
	var action = actions[1]
	var result = reducer(action.prevState, action.action)
	expect(equality(result, action.nextState)).toBe(true)
})

test('protocol/client/event/contactRequestReferenceUpdated (action index 2) should correctly update state', function() {
	var action = actions[2]
	var result = reducer(action.prevState, action.action)
	expect(equality(result, action.nextState)).toBe(true)
})

test('protocol/client/event/groupMetadataPayloadSent (action index 3) should correctly update state', function() {
	var action = actions[3]
	var result = reducer(action.prevState, action.action)
	expect(equality(result, action.nextState)).toBe(true)
})

test('chat/account/event/created (action index 4) should correctly update state', function() {
	var action = actions[4]
	var result = reducer(action.prevState, action.action)
	expect(equality(result, action.nextState)).toBe(true)
})
