syntax = "proto2";
package validate;

option go_package = "berty.tech/core/pkg/validate";

import "google/protobuf/descriptor.proto";

extend google.protobuf.MessageOptions {
  optional bool disabled = 53201;             // if set, protoc won't generate a Valide() method
  optional string additional_handler = 53202; // if set, Validate() will also call `additional_handler()` (which should be defined in go code)
}

extend google.protobuf.FieldOptions {
  //
  // global
  //

  // Required specifies that this field must be set
  // `field != nil`
  optional bool required = 53301; // if set, field should not be nil

  // Skip specifies that the validation rules of this filed should not be
  // evaluated
  // won't call `field.Validate()`
  optional bool skip = 53302;     // if set, won't call field.Validate()

  //
  // strings
  //

  optional int64 min_len = 53303;
  optional int64 max_len = 53304;
  optional bool is_contact_key = 53310;

  //
  // slices
  //

  optional int64 min_items = 53305;
  optional int64 max_items = 53306;

  //
  // integers
  //

  optional int64 int_gt = 53307;
  optional int64 int_lt = 53308;

  //
  // enums
  //

  // DefinedOnly specifies that this field must be only one of the defined
  // values for this enum, failing on any undefined value
  optional bool defined_only = 53309;
}
